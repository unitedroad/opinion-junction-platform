<div class="createauthorroles-encompass">
  <h4>Manage Author Roles:</h4>
   <div id="submitError" class="alert alert-danger" ng-show="showError">
      {{ errorMessage }}
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="hideError()">&times;</button>
    </div>
    <div id="submitSuccess" class="alert alert-success" ng-show="showSuccess">
      {{ successMessage }}
      <button type="button" class="close" data-dismiss="alert" aria-hidden="true" ng-click="hideSuccess()">&times;</button>
    </div>
 
  <fieldset class="input-group" ng-disabled="!allowEditing" class="create-roles-add-permission-form-fieldset-first">
    <button class="btn btn-success" ng-click="addNewRole()">Add New Role</button>
    <button class="btn btn-primary" ng-click="submitRoles()">Submit</button>
  </fieldset>
  <div class="createauthorroles-form-group">
    <h4 ng-show="existingRoles.length > 0"><a ng-click="toggleExistingRoles()">{{existingRolesToggleLinkText}}</a> Existing Roles:</h4>
    <div collapse="existingRolesCollapse">
      <div class="createauthorroles-role-div" ng-class="$even? 'createauthorroles-existingrole-div-even' : 'createauthorroles-existingrole-div-odd'" ng-repeat="role in existingRoles" >
	<div class="createauthorroles-role-toggle-and-heading" ><a ng-click="toggleRoleDetails(role)">{{role.roleToggleLinkText}}</a> <b><strong>{{role.role_name}}  {{role.changedText}}</strong></b></div>
	<div collapse="role.divCollapsed">
	  <div class="form-group">
            <input type="text" disabled="true" class="form-control" placeholder="Role name" ng-model="role.role_name">
	  </div>
	  <div class="form-group create-roles-add-permission-form-control">
            <label for="newPermission">Permissions:</label>
            <input id="newPermission" type="text" class="form-control col-xs-6 col-md-4 col-lg-3" placeholder="Add Permission" ng-model="role.newPermission"
	           ui-event="{ keyup : 'newPermissionKeyup($event, role)' }" 
		   typeahead="permission for permission in getFilterPermissionSuggestions(role) | filter:$viewValue">
	  </div>
	  <div class="form-group" ng-click="addPermissionToRole(role)">
            <button class="btn btn-info btn-sm">Add Permission</button>
	  </div>
	  <div class="createauthorroles-role-incorrect-permission-div" style="color:darkred" ng-class="role.incorrectPermissionClass">
	    {{role.incorrectPermissionText}}
	  </div>
	  <div class="createauthorroles-role-permission-div">
            <span class="createauthorroles-role-permission-remove-span" aria-label="Close" ng-repeat="permission in role.permissions"><a class="createauthorroles-role-permission-remove-a" ng-click="removePermissionFromRole(role,permission)">&times;</a>{{permission}}</span>
	  </div>
	</div>
      </div>
    </div>
    <h4 ng-show="newRoles != null && newRoles.length >0"><a ng-click="toggleNewRoles()">{{newRolesToggleLinkText}}</a> New Roles:</h4>
    <div collapse="newRolesCollapse">
      <div class="createauthorroles-role-div" ng-class="$even? 'createauthorroles-newrole-div-even' : 'createauthorroles-newrole-div-odd'" ng-repeat="role in newRoles" id="{{role.uiId}}">
	<div class="createauthorroles-role-toggle-and-heading" ><a ng-click="toggleRoleDetails(role)">{{role.roleToggleLinkText}}</a> <b><strong>{{role.role_name}}</strong></b>
	  <b class="createauthorroles-span-enter-rolename" ng-hide="role.role_name">
	    <strong>
	      Enter Role Name
	    </strong>
	  </b>
	</div>
	<div collapse="role.divCollapsed">
	  <div class="form-group">
            <input type="text" class="form-control" placeholder="Role name" ng-model="role.role_name" id="{{role.uiId + '-role-name-input-field'}}">
	  </div>
	  <div class="form-group create-roles-add-permission-form-control">
            <label for="newPermission">Permissions:</label>
            <input id="newPermission" type="text" class="form-control col-xs-6 col-md-4 col-lg-3" placeholder="Add Permission" ng-model="role.newPermission"
		   ui-event="{ keyup : 'newPermissionKeyup($event, role)' }" 
		   typeahead="permission for permission in getFilterPermissionSuggestions(role) | filter:$viewValue">
	  </div>
	  <div class="form-group" ng-click="addPermissionToRole(role)">
            <button class="btn btn-info btn-sm">Add Permission</button>
	  </div>
	  <div class="createauthorroles-role-incorrect-permission-div" style="color:darkred" ng-class="role.incorrectPermissionClass">
	    {{role.incorrectPermissionText}}
	  </div>
	  <div class="createauthorroles-role-permission-div">
            <span class="createauthorroles-role-permission-remove-span" aria-label="Close" ng-repeat="permission in role.permissions"><a class="createauthorroles-role-permission-remove-a" ng-click="removePermissionFromRole(role,permission)">&times;</a>{{permission}}</span>
	  </div>
	</div>
      </div>
    </div>

  </div>

  <div class="form-group" ng-show="roles.length > 0" ng-disabled="!allowEditing">
    <button class="btn btn-success" ng-click="addNewRole()">Add New Role</button>
    <button class="btn btn-primary" ng-click="submitRoles()">Submit</button>
  </div>
</div>
